package controller;

import javafx.scene.paint.Color;
import model.TestRole;
import view.Square;
import view.Window;

/*
 * same design logic with Location.java
 *
 * function of class:
 * 1) highlight squares that pieces can move to
 * 2) move pieces to a selected square
 * 3) deny a move when a selected piece cannot move to
 *
 * late function:
 * 1) remove a piece from the board
 *
 */
public class Move{
	private static TestRole roleSelected;
	private static Square[][] moveBoard;

	public static void detectValidSquare(TestRole hero, Square[][] board){
		roleSelected  = hero;
		moveBoard = board;
		int x = hero.getX();
		int y = hero.getY();

		switch(hero.getDX()){
		case 1:
			if(x-1 >= 0){
				moveBoard[x-1][y].setFill(Color.GREEN);
				moveBoard[x-1][y].setReady(true);
			}

			if(x + 1 <= Window.WIDTH){
				moveBoard[x+1][y].setFill(Color.GREEN);
				moveBoard[x+1][y].setReady(true);
			}


			if(y - 1 >= 0){
				moveBoard[x][y-1].setFill(Color.GREEN);
				moveBoard[x][y-1].setReady(true);
			}


			if(y + 1 <= Window.HEIGHT){
				moveBoard[x][y+1].setFill(Color.GREEN);
				moveBoard[x][y+1].setReady(true);
			}


			break;
		case 2:
			if(x-2 >= 0){
				moveBoard[x-2][y].setFill(Color.GREEN);
				moveBoard[x-2][y].setReady(true);
			}


			if(x + 2 <= Window.WIDTH){
				moveBoard[x+2][y].setFill(Color.GREEN);
				moveBoard[x+2][y].setReady(true);
			}

			if(y - 2 >= 0){
				moveBoard[x][y-2].setFill(Color.GREEN);
				moveBoard[x][y-2].setReady(true);
			}


			if(y + 2 <= Window.HEIGHT){
				moveBoard[x][y+2].setFill(Color.GREEN);
				moveBoard[x][y+2].setReady(true);
			}
			break;
		case 3:
			if(x-1 >= 0 && y + 1 <= Window.HEIGHT){
				moveBoard[x-1][y + 1].setFill(Color.GREEN);
				moveBoard[x-1][y + 1].setReady(true);
			}


			if(x + 1 <= Window.WIDTH && y - 1 >= 0){
				moveBoard[x+1][y - 1].setFill(Color.GREEN);
				moveBoard[x+1][y - 1].setReady(true);
			}


			if(y - 1 >= 0 && x - 1 >= 0){
				moveBoard[x - 1][y-1].setFill(Color.GREEN);
				moveBoard[x - 1][y-1].setReady(true);
			}


			if(y + 1 <= Window.HEIGHT && x + 1 <= Window.WIDTH){
				moveBoard[x + 1][y+1].setFill(Color.GREEN);
				moveBoard[x + 1][y+1].setReady(true);
			}
		}
	}

	public static boolean moveTest(int x, int y){
		boolean result = false;
		if(moveBoard[x][y].isReady()){
			result = true;
		}
		return result;
	}

	public static void clean(){
		for(int i = 0; i < moveBoard.length; i++){
			for(int j = 0; j < moveBoard.length; j++){
				moveBoard[i][j].setReady(false);
			}
		}
	}
}